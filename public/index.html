<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootcamp APIs</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"
        integrity="sha512-uMtXmF28A2Ab/JJO2t/vYhlaa/3ahUOgj1Zf27M5rOo8/+fcTUVH0/E0ll68njmjrLqOBjXM3V9NiPFL5ywWPQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="style.css">
    <script src="//unpkg.com/alpinejs" defer></script>
</head>

<body>
    <h1>My Bootcamp API</h1>

    <div class="widget" x-data="{
            sentence: '',
            longestWord: '',
            shortestWord: '',
            wordLengths: 0,
            resultToShow: '', // To keep track of the selected result
    
            checkSentence() {
                axios.get(`/api/word_game?sentence=${this.sentence}`)
                    .then((result) => {
                        this.longestWord = result.data.longestWord;
                        this.shortestWord = result.data.shortestWord;
                        this.wordLengths = result.data.sum;
                        this.resultToShow = ''; // Reset the selected result
                    });
            },
            billTotal: '',
            usage: '',
            available: '',
            usage1: '',
            available1: '',
            result: '',
            enteredBill: '',
            phonebill: '',
    
            calculateBill(){
                axios.get(`/api/phonebill/total?bill=${this.phonebill}`)
                .then(result => {
                    console.log(result.data)
                    this.billTotal = result.data.bill
                })
            },
            clearForm() {    
                this.enteredBill = '';
                this.showResult = false;
            },

            checkAirtime() {
                axios.get(`/api/enough?usage=${this.usage}&available=${this.available}`)
                .then((response) => {
                    this.result = response.data.result;
                })
                .catch((error) => {
                    console.error(error);
                    this.result = 'Error';
                });
        
            },
            clearForm() {
                this.usage1 = '';
                this.available1 = '';
                this.result = '';
            }
        }">

        <!-- Enough airtime -->
        <div class="container mt-4">

            <h3>Word game Widget</h3>
            <div>
                <textarea x-model="sentence" name="" id="" cols="30" rows="5"></textarea>
                <div><button x-on:click="checkSentence">Check Sentence</button></div>
            </div>

            <div>
                <!-- Radio buttons for the results -->
                <div>
                    <input type="radio" id="longest" name="result" value="longest" x-model="resultToShow">
                    <label for="longest">Longest word: <span x-text="longestWord"></span></label>
                </div>

                <div>
                    <input type="radio" id="shortest" name="result" value="shortest" x-model="resultToShow">
                    <label for="shortest">Shortest word: <span x-text="shortestWord"></span></label>
                </div>

                <div>
                    <input type="radio" id="wordLengths" name="result" value="wordLengths" x-model="resultToShow">
                    <label for="wordLengths">Word count: <span x-text="wordLengths"></span></label>
                </div>
            </div>

            <div>
                <!-- Display the selected result -->
                <div x-show="resultToShow === 'longest'">
                    Longest word: <span x-text="longestWord"></span>
                </div>

                <div x-show="resultToShow === 'shortest'">
                    Shortest word: <span x-text="shortestWord"></span>
                </div>

                <div x-show="resultToShow === 'wordLengths'">
                    Word count: <span x-text="wordLengths"></span>
                </div>
            </div>
        </div>
        
        <div class="container mt-4">
            <h3>Enough Airtime Widget</h3>
            <div>
                <label for="usage">Projected Usage:</label>
                <input type="text" x-model="usage1" id="usage">
            </div>
            <br>
            <div>
                <label for="available">Available Airtime:</label>
                <input type="number" x-model="available1" id="available">
            </div>
            <br>
            <div>
                <button x-on:click="checkAirtime">Check Airtime</button>
            </div>
            <br>
            <button class="btn btn-secondary mt-3" x-on:click="clearForm">Clear</button>
            <br>
            <div x-show="result">
                Result: <span x-text="result"></span>
            </div>
        </div>

        <!-- totalPhoneBill -->
        <div class="container mt-4" x-data="{ billTotal: '', enteredBill: '', showResult: false }">
            <h3>Calculate PhoneBill Widget</h3>
            <div class="card-body">
                <p x-text="billTotal" x-show="showResult"></p>
                <label for="billInput">Enter a bill:</label>
                <input class="form-control" type="text" x-model="enteredBill" id="billInput" placeholder="enter a bill">
                <button class="btn btn-primary mt-3"
                    @click="calculateBill(); phonebill = enteredBill; showResult = true; setTimeout(() => showResult = false, 3000)">Done</button>
            </div>
            <!-- Clear button for the bill -->
            <button class="btn btn-secondary mt-3" @click="clearForm">Clear</button>
        </div>
    </div>

</body>
</html>